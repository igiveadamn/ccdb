<script type="text/ng-template" id="admission/admission.form.html">
<h1>Admission</h1>
<div class="divider"></div>

<div class="from-print-heading">
    <h2 class="form-shield-heading">SHIELD</h2>
    <div class="form-metadata" >
        <h5 class="form-patient-reference">{{patient.reference}}</h5>
        <h5 class="form-hospital">{{patient.hospital}}</h5>
    </div>
</div>

<form name="patientForm" ng-submit="save('admission')" novalidate>
    <uib-tabset active="activeForm">
        <uib-tab index="0">
            <uib-tab-heading>
                Admission
                <i ng-class="(patientForm.admissionInfoForm.$invalid) ? 'glyphicon glyphicon-exclamation-sign red' : 'glyphicon glyphicon-ok-sign green'"></i>
            </uib-tab-heading>
            <ng-include src="'admission/admission.info.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="1">
            <uib-tab-heading>
                Condition on arrival
                <i ng-class="(patientForm.scoreForm.$invalid) ? 'glyphicon glyphicon-exclamation-sign red' : 'glyphicon glyphicon-ok-sign green'"></i>
            </uib-tab-heading>
            <ng-include src="'admission/condition.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="2">
            <uib-tab-heading>
                History
                <i ng-class="(patientForm.historyForm.$invalid) ? 'glyphicon glyphicon-exclamation-sign red' : 'glyphicon glyphicon-ok-sign green'"></i>
            </uib-tab-heading>
            <ng-include src="'admission/history.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="3">
            <uib-tab-heading>
                Operative Details
                <i ng-class="(patientForm.operativeForm.$invalid) ? 'glyphicon glyphicon-exclamation-sign red' : 'glyphicon glyphicon-ok-sign green'"></i>
            </uib-tab-heading>
            <ng-include src="'admission/operative.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="4" heading="Plan"><!-- score -->
            <uib-tab-heading>
                Plan
                <i ng-class="(patientForm.planForm.$invalid) ? 'glyphicon glyphicon-exclamation-sign red' : 'glyphicon glyphicon-ok-sign green'"></i>
            </uib-tab-heading>
            <ng-include src="'admission/plan.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="5" heading="Summary">
            <uib-tab-heading>
                Summary
                <i ng-class="(patientForm.summaryForm.$invalid) ? 'glyphicon glyphicon-exclamation-sign red' : 'glyphicon glyphicon-ok-sign green'"></i>
            </uib-tab-heading>
            <ng-include src="'admission/summary.form.html'"></ng-include>
        </uib-tab>
    </uib-tabset>

    <button type="submit" ng-disabled="patientForm.$invalid" class="btn btn-primary">Save</button>

</form></script>
<script type="text/ng-template" id="admission/admission.info.form.html">
<ng-form name="admissionInfoForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Admission</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-date label="Admission date and time" ng-model="patient.admission.admissionDateTime"></ccdb-form-date>
                <ccdb-form-text label="Hospital admitted from" value="patient.admission.admittedFrom"></ccdb-form-text>
                <ccdb-form-text label="Days in Hospital before ICU" value="patient.admission.numOfdaysInhospitalBeforeICU"></ccdb-form-text>
            </div>
            <div class="col-sm-6">
                <ccdb-form-text label="Admitting doctor" value="patient.admission.admittingDoctor"></ccdb-form-text>
                <ccdb-form-text label="Admitting consultant" value="patient.admission.admittingConsultant"></ccdb-form-text>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="admission/condition.form.html">
<ng-form name="scoreForm">
    <ccdb-score-form score="patient.admissionScore" admission="true"></ccdb-score-form>
</ng-form>
</script>
<script type="text/ng-template" id="admission/history.form.html">
<ng-form name="historyForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">History</h1>
        <div class="row">
            <!-- show the history recorded at referral above the boxes -->
            <div class="col-sm-6">
                <ccdb-form-textarea label="Past medical history"
                                    value="patient.admission.pastMedicalHistory"></ccdb-form-textarea>
                <ccdb-form-textarea label="Past surgical history"
                                    value="patient.admission.pastSurgicalHistory"></ccdb-form-textarea>
            </div>
            <div class="col-sm-6">
                <ccdb-form-textarea label="Chronic medications" value="patient.admission.medications"></ccdb-form-textarea>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="admission/operative.form.html">
<ng-form name="operativeForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Operative Details</h1>
        <div class="row">
            <div class="col-sm-6" ng-if="patient.referral.operativeStatusAtTimeOfReferral !== 'Not for surgery'"> <!-- if non-operative, disable and don't require the rest -->
                <ccdb-form-date label="Date and time of surgery" ng-model="patient.admission.surgeryDateTime"></ccdb-form-date>
                <ccdb-form-text label="Operation performed" value="patient.admission.operationPerformed"></ccdb-form-text>
                <ccdb-form-text label="Operative findings" value="patient.admission.operativeFindings"></ccdb-form-text>
                <ccdb-form-textarea label="Operative Plan" value="patient.admission.operativePlan"></ccdb-form-textarea>
                <ccdb-form-text label="Duration of operation" value="patient.admission.durationOfOperation"></ccdb-form-text>
                <ccdb-form-text label="Anaesthesia" value="patient.admission.anaesthesia"></ccdb-form-text>
            </div>

            <div class="col-sm-6"><!-- leave this in even if non-operative -->
                <ccdb-form-text label="Grade of laryngoscopy" value="patient.admission.gradeOfLaryngoscopy"></ccdb-form-text>
                <ccdb-form-text label="Duration of anaesthesia" value="patient.admission.durationOfAnaesthesia"></ccdb-form-text>
                <ccdb-form-text label="Antibiotic" value="patient.admission.antibiotics"></ccdb-form-text>
                <ccdb-form-text label="Intra-operative total volumes" value="patient.admission.intraOperativeTotalVolumes"></ccdb-form-text>
                <ccdb-form-text label="Blood loss" value="patient.admission.bloodLoss"></ccdb-form-text>
                <ccdb-form-text label="Urine output (mls/hr)" value="patient.admission.urineOutput"></ccdb-form-text>
                <ccdb-form-text label="Crystalloid volume" value="patient.admission.crystalloidVolume"></ccdb-form-text>
                <ccdb-form-text label="Colloid volume" value="patient.admission.colloidVolume"></ccdb-form-text>
                <ccdb-form-text label="Packed cell" value="patient.admission.packedCells"></ccdb-form-text>
                <ccdb-form-text label="Freeze dried plasma" value="patient.admission.freezeDriedPlasma"></ccdb-form-text>
                <ccdb-form-text label="Platelets" value="patient.admission.platelets"></ccdb-form-text>
                <ccdb-form-text label="Cruoprecipitate" value="patient.admission.cruoprecipitate"></ccdb-form-text>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="admission/plan.form.html">
<ng-form name="planForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Plan</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-text label="Airway and breathing" value="patient.admission.airwayAndBreathing"></ccdb-form-text>
                <ccdb-form-text label="Circulation" value="patient.admission.circulation"></ccdb-form-text>
                <ccdb-form-text label="Renal and electrolytes" value="patient.admission.renalAndElectrolytes"></ccdb-form-text>
                <ccdb-form-text label="Fluids and feeds" value="patient.admission.fluids"></ccdb-form-text>
                <ccdb-form-text label="Antibiotics" value="patient.admission.antibiotics"></ccdb-form-text>
            </div>
            <div class="col-sm-6">
                <ccdb-form-text label="Lines" value="patient.admission.lines"></ccdb-form-text>
                <ccdb-form-text label="Analgesia And Sedation" value="patient.admission.analgesiaAndSedation"></ccdb-form-text>
                <ccdb-form-text label="Thrombosis Management" value="patient.admission.thrombosisManagement"></ccdb-form-text>
                <ccdb-form-text label="Ulcer prophylaxis" value="patient.admission.ulcerProphylaxis"></ccdb-form-text>
                <ccdb-form-text label="Other" value="patient.admission.other"></ccdb-form-text>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="admission/summary.form.html">
<ng-form name="summaryForm">
    <h1 class="form-print-heading">Summary</h1>
    <div class="panel form-panel">
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-textarea label="Admission summary notes" value="patient.admission.admissionSummaryNotes"></ccdb-form-textarea>
            </div>
        </div>
    </div>
</ng-form>
</script>
<script type="text/ng-template" id="apache/apache.form.html">
<div class="panel form-panel">
    <h1 class="form-print-heading">Apache Score</h1>
    <div class="row form-two-column-print">
        <div class="col-sm-6">
            <div class="form-group form-print-hide">
                <span class="pull-right">Not all values are available <input type="checkbox" ng-model="allValuesNotAvailable"></span>
            </div>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Temperature"
                    placeholder="&deg;C"
                    field="temperature"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Systolic blood pressure"
                    placeholder="mm Hg"
                    field="systolicPressure"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Diastolic blood pressure"
                    placeholder="mm Hg"
                    field="diastolicPressure"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Heart rate"
                    placeholder="beats/minute"
                    field="heartRate"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Respiratory heart rate"
                    placeholder="breaths/minute"
                    field="respiratoryRate"
            ></ccdb-form-apache-number>
            <ccdb-form-number
                    required="!allValuesNotAvailable"
                    label="Urine output volume"
                    placeholder="mls"
                    value="patient.apacheLow.urineOutput"
            ></ccdb-form-number>
            <ccdb-form-number
                    required="!allValuesNotAvailable"
                    label="Urine output hours"
                    placeholder="hrs"
                    value="patient.apacheLow.urineOutputHours"
            ></ccdb-form-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Glucose"
                    placeholder="mmol/L"
                    field="glucose"
            ></ccdb-form-apache-number>
            <ccdb-form-select
                    required="!allValuesNotAvailable"
                    label="Eye opening"
                    options="$parent.eyeOpening"
                    value="patient.apacheLow.eyeOpening"
            ></ccdb-form-select>
            <ccdb-form-select
                    required="!allValuesNotAvailable"
                    label="Verbal response"
                    options="$parent.verbalResponse"
                    value="patient.apacheLow.verbalResponse"
            ></ccdb-form-select>
            <ccdb-form-select
                    required="!allValuesNotAvailable"
                    label="Motor response"
                    options="$parent.motorResponse"
                    value="patient.apacheLow.motorResponse"
            ></ccdb-form-select>
            <ccdb-form-number
                    required="!allValuesNotAvailable"
                    label="Glasgow coma scale"
                    value="patient.apacheLow.glasgowComaScale"
            ></ccdb-form-number>
            <ccdb-form-select
                    required="!allValuesNotAvailable"
                    label="Pupils"
                    options="$parent.pupils"
                    value="patient.apacheLow.pupils"
            ></ccdb-form-select>
            <ccdb-form-select
                    required="!allValuesNotAvailable"
                    label="Ventilated"
                    options="$parent.yesNo"
                    value="patient.apacheLow.ventilated"
            ></ccdb-form-select>
            <ccdb-form-select
                    required="!allValuesNotAvailable"
                    label="Thrombolytic therapy"
                    options="$parent.yesNo"
                    value="patient.apacheLow.thrombolyticTherapy"
            ></ccdb-form-select>
        </div>
        <div class="col-sm-6">
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Haematocrit"
                    placeholder="%"
                    field="haematocrit"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="WBC"
                    placeholder="x103/mm3"
                    field="wBC"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Sodium"
                    placeholder="mEq/L"
                    field="sodium"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Potassium"
                    placeholder="mEq/L"
                    field="potassium"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Corr Calcium"
                    placeholder="mmol/l"
                    field="corrCalcium"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Urea"
                    placeholder="mmol/l"
                    field="urea"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Creatinine"
                    placeholder="mg/dL"
                    field="creatinine"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Albumin"
                    placeholder="g/l"
                    field="albumin"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Bilirubin"
                    placeholder="umol/l"
                    field="bilirubin"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Glucose"
                    placeholder="mmol/L"
                    field="glucose"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="INR"
                    field="iNR"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="FiO2"
                    placeholder="%"
                    field="fiO2"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="PH"
                    field="pH"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="pO2"
                    placeholder="kPa OR mmHg"
                    field="pO2"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="PCO2"
                    placeholder="kPa"
                    field="pCO2"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Lactate"
                    field="lactate"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="HCO3"
                    placeholder="mEq/L"
                    field="hCO3"
            ></ccdb-form-apache-number>
            <ccdb-form-apache-number
                    required="!allValuesNotAvailable"
                    label="Base excess"
                    field="baseExcess"
            ></ccdb-form-apache-number>
        </div>
    </div>
</div></script>
<script type="text/ng-template" id="apache/apache.html">
<h1>Apache Score</h1>

<div class="from-print-heading">
    <h2 class="form-shield-heading">SHIELD</h2>
    <div class="form-metadata" >
        <h5 class="form-patient-reference">{{patient.reference}}</h5>
        <h5 class="form-hospital">{{patient.hospital}}</h5>
    </div>
</div>

<form name="patientForm" ng-submit="save()" novalidate>

    <ccdb-apache-form patient="patient"></ccdb-apache-form>

    <button type="submit" ng-disabled="patientForm.$invalid" class="btn btn-primary">Save</button>

</form></script>
<script type="text/ng-template" id="dashboard/dashboard.html">
<div class="row">
  <div class="col-md-6">
    <h1>Dashboard</h1>
  </div>
  <div class="col-md-6">
    <span class="pull-right">
      New referral:
      <div class="btn-group" role="group" aria-label="...">
        <a href="#/newReferral/Elective" class="btn btn-default">Elective</a>
        <a href="#/newReferral/Emergency" class="btn btn-default">Emergency</a>
      </div>
    </span>
  </div>
</div>
<div class="divider"></div>
<div class="panel panel-default">
  <ccdb-patient-list title="Active Referrals"
                     buttons="Outcome,Admit,Discharge"
                     filter='{"referral.entryDateTime": { "$exists": true }, "discharge.entryDateTime": null, "admission.entryDateTime": null}'
  ></ccdb-patient-list>
</div>
<div class="panel panel-default">
  <ccdb-patient-list title="Current Admissions"
                     buttons="Score,Discharge"
                     filter='{"admission.entryDateTime": { "$exists": true }, "discharge.dischargeDateTime": null}'
  ></ccdb-patient-list>
</div>
</script>
<script type="text/ng-template" id="discharge/discharge.form.html">
<h1>Discharge</h1>
<div class="divider"></div>

<div class="from-print-heading">
    <h2 class="form-shield-heading">SHIELD</h2>
    <div class="form-metadata" >
        <h5 class="form-patient-reference">{{patient.reference}}</h5>
        <h5 class="form-hospital">{{patient.hospital}}</h5>
    </div>
</div>

<form name="patientForm" ng-submit="save('discharge')" novalidate>
    <div class="panel form-panel">
        <h1 class="form-print-heading">Discharge</h1>
        <div class="row">
                <div class="col-sm-6">
                    <ccdb-form-date label="Discharge date" ng-model="patient.discharge.dischargeDateTime"></ccdb-form-date>
                    <ccdb-form-select label="Discharge status" options="dischargeStatuses" value="patient.discharge.dischargeStatus"></ccdb-form-select>
                </div>
                <div class="col-sm-6">
                    <ccdb-form-textarea label="Comments" value="patient.discharge.comments"></ccdb-form-textarea>
                </div>
            </div>

            <button type="submit" ng-disabled="patientForm.$invalid" class="btn btn-primary">Save</button>
    </div>
</form></script>
<script type="text/ng-template" id="login/login.html">
<div ng-hide="!errorHandler.message" data-alert class="alert-box alert">
    {{errorHanlder.message}}
</div>

<div class ="container">
    <form class="form-signin">
        <h2 class="form-signin-heading">Please sign in</h2>
        <label for="username" class="sr-only">username</label>
        <input autofocus type="username" class="form-control" id="username" placeholder="Username (email address)" ng-model="user.username">
        <label for="password" class="sr-only">Password</label>
        <input type="password" class="form-control" id="password" placeholder="Password" ng-model="user.password">
        <button type="submit" ng-click="login()" class="btn btn-lg btn-primary btn-block">Submit</button>
        <button type="button" ng-click="reset()" class="btn btn-link pull-right form-signing-reset-btn">Forgotten your password?</button>
    </form>
</div></script>
<script type="text/ng-template" id="navigation/navigation.html">
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">SHIELD</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="#/dashboard">Dashboard</a></li>
                <li><a href="#/search">Search</a></li>                
                <li><a href="#/users">Users</a></li>
                <li><a href="#/download-patient" ng-show="isLoggedIn" ng-click="downloadPatient()">Download Patient CSV</a></li>
                <!--<li><a href="#/download-patient-scores" ng-show="isLoggedIn" ng-click="downloadPatientScores()">Download Patient Scores CSV</a></li>-->
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#/login" ng-hide="isLoggedIn">Log In</a></li>
                <p class="navbar-text">{{loggedInUser}}</p>
                <li><a href="#/logout" ng-show="isLoggedIn" ng-click="logout()">Log Out</a></li>
                <li ng-show="online"><a><span class="round success label">Online</span></a></li>
                <li ng-hide="online"><a><span class="round alert label">Offline</span></a></li>
            </ul>
        </div>
    </div>
</nav>
</script>
<script type="text/ng-template" id="password/password.html">
<legend>Password Change Form</legend>

<div class="form-group">
    <label for="password">Password</label>
    <input type="password" class="form-control" id="password" placeholder="Password" ng-model="user.password" ng-change="checkPasswords()">
    <label for="password2">Confirm Password</label>
    <input type="password" class="form-control" id="password2" placeholder="Password" ng-model="user.password2" ng-change="checkPasswords()">
</div>

<div ng-show="passwordError">The provided passwords do not match</div>
<div ng-hide="passwordError">The provided passwords match</div>

<button type="button" ng-disabled="passwordError" ng-click="password()" class="btn btn-primary">Submit</button>
</script>
<script type="text/ng-template" id="patient/patient.count.html">
<div class="info-box">
  <h1>{{count}}</h1>
    <div>{{title}}</div>
</div>
</script>
<script type="text/ng-template" id="patient/patient.details.html">
<div class="clearfix">
    <h3 class="float-left">{{ patient.lastName }}, {{ patient.firstName }}</h3>
    <h3 class="float-right">{{ patient.reference }}</h3>
</div>
<div class="clearfix">
    <span class="float-left">{{ patient.race }}</span>
    <span class="float-left">{{ patient.gender }}</span>
    <span class="float-left">{{ patient.birthDate | date: "dd/MM/yyyy" }}</span>
    <span class="float-right"><a ng-click="edit(patient)" class="button right">Edit</a></span>
</div>
</script>
<script type="text/ng-template" id="patient/patient.form.html">
<h1>Edit patient</h1>
<div class="divider"></div>
<uib-tabset active="active">
  <uib-tab index="0" heading="Patient Details">
      <ng-include src="'patient/patient.details.form.html'"></ng-include>
  </uib-tab>
  <uib-tab index="1" heading="Referral">
      <ng-include src="'referral/referral.form.html'"></ng-include>
  </uib-tab>
  <uib-tab index="2" heading="Admission">
      <ng-include src="'admission/admission.form.html'"></ng-include>
  </uib-tab>
  <uib-tab index="3" heading="Scores">
      <ng-include src="'scores/scores.form.html'"></ng-include>
  </uib-tab>
  <uib-tab index="4" heading="Discharge">
      <ng-include src="'discharge/discharge.form.html'"></ng-include>
  </uib-tab>
</uib-tabset>
</script>
<script type="text/ng-template" id="patient/patient.html">
this is the view page</script>
<script type="text/ng-template" id="patient/patient.list.html">
<table class="table table-hover">
    <h3>{{title}}</h3>
    <thead>
    <tr>
        <th width="230">Last name</th>
        <th width="230">First name</th>
        <th width="80">Age</th>
        <th width="80">Gender</th>
        <th width="180">Reference</th>
        <th width="430">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="patient in patients">
        <td>{{patient.lastName}}</td>
        <td>{{patient.firstName}}</td>
        <td>{{patient.birthDate | ageFilter}}</td>
        <td>{{patient.gender}}</td>
        <td>{{patient.reference}}</td>
        <td> <span ng-repeat="button in btns"><a ng-click="act(button, patient)" class="btn btn-default">{{button}}</a> </span></td>
    </tr>
    </tbody>
</table>
</script>
<script type="text/ng-template" id="referral/elective/assessment.form.html">
<ng-form name="electiveAssessmentForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Assessment</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-textarea label="History" value="patient.referral.history"></ccdb-form-textarea>
                <ccdb-form-textarea label="Examination" value="patient.referral.examination"></ccdb-form-textarea>
            </div>
            <div class="col-sm-6">
                <ccdb-form-textarea label="Suggested Management and Investigations Requested" value="patient.referral.managementPlan"></ccdb-form-textarea>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="referral/elective/decision.form.html">
<ng-form name="electiveDecisionForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Decision</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-select label="SCCM" options="sCCM" value="patient.referral.sccmScore"></ccdb-form-select>
                <ccdb-form-select label="Level of care required" options="levelsOfCare" value="patient.referral.levelOfCareRequired"></ccdb-form-select>
            </div>
            <div class="col-sm-6">
                <ccdb-form-select label="Decision" options="decision" value="patient.referral.decision"></ccdb-form-select>
                <ccdb-form-text label="Decision reason" value="patient.referral.decisionReason"></ccdb-form-text>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="referral/elective/outcome.form.html">
<ng-form name="electiveOutcomeForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Outcome</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-date-and-time label="Outcome entry time and date" ng-model="patient.referral.outcomeEntryDateTime"></ccdb-form-date-and-time>
                <ccdb-form-text label="Doctor finalising" value="patient.referral.doctorFinalising"></ccdb-form-text>
                <ccdb-form-select label="Revised SCCCM" options="revisedScccm" value="patient.referral.revisedScccm"></ccdb-form-select>
                <ccdb-form-select label="Any delay on admission" options="yesNo" value="patient.referral.ifAcceptedAnyDelay"></ccdb-form-select>
                <ccdb-form-textarea label="Reason for delay" value="patient.referral.delayReason" ng-if="patient.referral.ifAcceptedAnyDelay !== 'No'"></ccdb-form-textarea>
            </div>
            <div class="col-sm-6">
                <ccdb-form-textarea label="If accepted but never admitted" value="patient.referral.reasonPatientWasNeverAdmitted"></ccdb-form-textarea>
                <ccdb-form-text label="Unit transferred to if transferred" value="patient.referral.unitTransferredToIfTransferred"></ccdb-form-text>
                <ccdb-form-select label="Final outcome" options="finalOutcome" value="patient.referral.finalOutcome" optional="true" ></ccdb-form-select>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="referral/elective/referral.details.form.html">
<ng-form name="electiveReferralDetailsForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Referral Details</h1>
        <div class="row">
            <div class="col-sm-6"><!-- the time the ICU hears about the patient  -->
                <ccdb-form-date label="Referral date" ng-model="patient.referral.referralDateTime"></ccdb-form-date>
                <ccdb-form-select label="Patient location" options="patientLocation" value="patient.referral.patientLocation"></ccdb-form-select>
                <ccdb-form-select label="Operative status at time of referral" options="operativeStatusAtTimeOfReferral" value="patient.referral.operativeStatusAtTimeOfReferral"></ccdb-form-select>
                <ccdb-form-select label="Base discipline referring" options="baseDisciplines" value="patient.referral.baseDisciplineReferring"></ccdb-form-select>
                <ccdb-form-text label="Base discipline consultant" value="patient.referral.baseDisciplineConsultant"></ccdb-form-text>
                <ccdb-form-text label="Referring doctor" value="patient.referral.referringDoctor"></ccdb-form-text>
                <ccdb-form-select label="Discipline of referring doctor" options="baseDisciplines" value="patient.referral.disciplineOfReferringDoctor"></ccdb-form-select>
                <ccdb-form-text label="Referring hospital" value="patient.referral.referringHospital"></ccdb-form-text>
                <ccdb-form-select label="Diagnosis type" options="diagnosisTypes" value="patient.referral.diagnosisType"></ccdb-form-select>
                <ccdb-form-multiselect label="Diagnosis" options="diagnosis" value="patient.referral.diagnosis"></ccdb-form-multiselect>
                <ccdb-form-text label="Diagnosis details" value="patient.referral.diagnosisDetails"></ccdb-form-text>
            </div>
            <div class="col-sm-6">
                <ccdb-form-multiselect label="Comorbidities" options="comorbidities" value="patient.referral.comorbidities"></ccdb-form-multiselect>
                <ccdb-form-textarea label="Planned operation" value="patient.referral.plannedOperation"></ccdb-form-textarea>
                <ccdb-form-textarea label="Planned operation reason" value="patient.referral.reasonForOperation"></ccdb-form-textarea>
                <ccdb-form-date label="Date operation planned" ng-model="patient.referral.dateOperationPlanned"></ccdb-form-date>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="referral/elective/referral.form.html">
<ng-form name="electiveReferralForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Referral</h1>
        <div class="row">
            <div class="col-sm-6"><!-- needs to be a multiple -->
                <ccdb-form-multiselect label="Reason of referral to ICU" options="reasonOfReferralToICU" value="patient.referral.reasonOfReferralToICU"></ccdb-form-multiselect>
            </div>
            <div class="col-sm-6">
                <ccdb-form-number label="Number of days in hospital" value="patient.referral.numberOfDaysInHospital"></ccdb-form-number>
                <ccdb-form-select label="Is the patient currently ventilated" options="patientCurrentlyVentilated" value="patient.referral.patientCurrentlyVentilated"></ccdb-form-select>
                <ccdb-form-select label="Was this patient in ICU in the previous 48 hours" options="yesNo" value="patient.referral.wasThisPatientInIcuInThePrevious48Hours"></ccdb-form-select>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="referral/emergency/assessment.form.html">
<ng-form name="emergencyAssessmentForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Assessment</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-textarea label="History" value="patient.referral.history"></ccdb-form-textarea>
                <ccdb-form-textarea label="Examination" value="patient.referral.examination"></ccdb-form-textarea>
            </div>
            <div class="col-sm-6">
                <ccdb-form-textarea label="Management plan" value="patient.referral.managementPlan"></ccdb-form-textarea>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="referral/emergency/decision.form.html">
<ng-form name="emergencyDecisionForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Decision</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-select label="SCCM" options="sCCM" value="patient.referral.sccmScore"></ccdb-form-select>
                <ccdb-form-select label="Level of care required" options="levelsOfCare" value="patient.referral.levelOfCareRequired"></ccdb-form-select>
            </div>
            <div class="col-sm-6">
                <ccdb-form-select label="Decision" options="decision" value="patient.referral.decision"></ccdb-form-select>
                <ccdb-form-text label="Decision reason" value="patient.referral.decisionReason"></ccdb-form-text>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="referral/emergency/outcome.form.html">
<ng-form name="emergencyOutcomeForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Outcome</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-date-and-time label="Outcome entry time and date" ng-model="patient.referral.outcomeEntryDateTime"></ccdb-form-date-and-time>
                <ccdb-form-text label="Doctor finalising" value="patient.referral.doctorFinalising"></ccdb-form-text>
                <ccdb-form-select label="Revised SCCCM" options="revisedScccm" value="patient.referral.revisedScccm"></ccdb-form-select>
                <ccdb-form-select label="Any delay on admission" options="yesNo" value="patient.referral.ifAcceptedAnyDelay"></ccdb-form-select>
                <ccdb-form-textarea label="Reason for delay" value="patient.referral.delayReason" ng-if="patient.referral.ifAcceptedAnyDelay !== 'No'"></ccdb-form-textarea>
            </div>
            <div class="col-sm-6">
                <ccdb-form-textarea label="If accepted but never admitted" value="patient.referral.reasonPatientWasNeverAdmitted"></ccdb-form-textarea>
                <ccdb-form-text label="Unit transferred to if transferred" value="patient.referral.unitTransferredToIfTransferred"></ccdb-form-text>
                <ccdb-form-select label="Final outcome" options="finalOutcome" value="patient.referral.finalOutcome" optional="true"></ccdb-form-select>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="referral/emergency/referral.details.form.html">
<ng-form name="emergencyReferralDetailsForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Referral Details</h1>
        <div class="row">
            <div class="col-sm-6"><!-- the time the ICU hears about the patient  -->
                <ccdb-form-date label="Referral date" ng-model="patient.referral.referralDateTime"></ccdb-form-date>
                <ccdb-form-select label="Patient location" options="patientLocation" value="patient.referral.patientLocation"></ccdb-form-select>
                <ccdb-form-select label="Operative status at time of referral" options="operativeStatusAtTimeOfReferral" value="patient.referral.operativeStatusAtTimeOfReferral"></ccdb-form-select>
                <ccdb-form-select label="Base discipline referring" options="baseDisciplines" value="patient.referral.baseDisciplineReferring"></ccdb-form-select>
                <ccdb-form-text label="Base discipline consultant" value="patient.referral.baseDisciplineConsultant"></ccdb-form-text>
                <ccdb-form-text label="Referring doctor" value="patient.referral.referringDoctor"></ccdb-form-text>
                <ccdb-form-select label="Discipline of referring doctor" options="baseDisciplines" value="patient.referral.disciplineOfReferringDoctor"></ccdb-form-select>
                <ccdb-form-text label="Referring hospital" value="patient.referral.referringHospital"></ccdb-form-text>
            </div>
            <div class="col-sm-6">
                <ccdb-form-select label="Diagnosis type" options="diagnosisTypes" value="patient.referral.diagnosisType"></ccdb-form-select>
                <ccdb-form-multiselect label="Diagnosis" options="diagnosis" value="patient.referral.diagnosis"></ccdb-form-multiselect>
                <ccdb-form-text label="Diagnosis details" value="patient.referral.diagnosisDetails"></ccdb-form-text>
                <ccdb-form-multiselect label="Comorbidities" options="comorbidities" value="patient.referral.comorbidities"></ccdb-form-multiselect>
            </div>
        </div>
    </div>
</ng-form></script>
<script type="text/ng-template" id="referral/emergency/referral.form.html">
<ng-form name="emergencyReferralForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Referral</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-multiselect label="Reason of referral to ICU" options="reasonOfReferralToICU" value="patient.referral.reasonOfReferralToICU"></ccdb-form-multiselect>
            </div>
            <div class="col-sm-6">
                <ccdb-form-select label="Is the referral for a complication of" options="referralForComplicationOf" value="patient.referral.referralForComplicationOf"></ccdb-form-select>
                <ccdb-form-number label="Number of days in hospital" value="patient.referral.numberOfDaysInHospital"></ccdb-form-number>
                <ccdb-form-select label="Is the patient currently ventilated" options="patientCurrentlyVentilated" value="patient.referral.patientCurrentlyVentilated"></ccdb-form-select>
                <ccdb-form-select label="Was this patient in ICU in the previous 48 hours" options="yesNo" value="patient.referral.wasThisPatientInIcuInThePrevious48Hours"></ccdb-form-select>
            </div>
        </div>
    </div>
</ng-form>
</script>
<script type="text/ng-template" id="referral/emergency/score.form.html">
<ng-form name="emergencyScoreForm">
    <ccdb-score-form score="patient.referralScore" referral="true"></ccdb-score-form>
</ng-form></script>
<script type="text/ng-template" id="referral/referral.form.html">
<h1>New {{patient.referral.emergencyVsElective}} Referral: </h1>
<div class="divider"></div>

<div class="from-print-heading">
    <h2 class="form-shield-heading">SHIELD</h2>
    <div class="form-metadata" >
        <h5 class="form-patient-reference">{{patient.reference}}</h5>
        <h5 class="form-hospital">{{patient.hospital}}</h5>
    </div>
</div>

<form name="patientForm" ng-submit="save('referral')" novalidate autocomplete="off" >
    <uib-tabset active="activeForm">
        <uib-tab index="0">
            <uib-tab-heading>
                Patient Details
                <i ng-class="(patientForm.referralPatientDetailsForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red'
                   : 'glyphicon glyphicon-ok-sign green'">
                </i>
            </uib-tab-heading>
            <ng-include src="'referral/referral.patient.details.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="1" heading="Referral Details">
            <uib-tab-heading>
                Referral Details
                <i ng-if="patient.referral.emergencyVsElective=='Emergency'"
                   ng-class="(patientForm.emergencyReferralDetailsForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red'
                   : 'glyphicon glyphicon-ok-sign green'">
                </i>
                <i ng-if="patient.referral.emergencyVsElective=='Elective'"
                   ng-class="(patientForm.electiveReferralDetailsForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red'
                   : 'glyphicon glyphicon-ok-sign green'">

                </i>
            </uib-tab-heading>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Emergency'" src="'referral/emergency/referral.details.form.html'"></ng-include>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Elective'" src="'referral/elective/referral.details.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="2" heading="Referral">
            <uib-tab-heading>
                Referral
                <i ng-if="patient.referral.emergencyVsElective=='Emergency'"
                   ng-class="(patientForm.emergencyReferralForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red'
                   : 'glyphicon glyphicon-ok-sign green'">

                </i>
                <i ng-if="patient.referral.emergencyVsElective=='Elective'"
                   ng-class="(patientForm.electiveReferralForm.$invalid) ?
                   'glyphicon glyphicon-exclamation-sign red' :
                   'glyphicon glyphicon-ok-sign green'">

                </i>
            </uib-tab-heading>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Emergency'" src="'referral/emergency/referral.form.html'"></ng-include>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Elective'" src="'referral/elective/referral.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="3" heading="Assessment">
            <uib-tab-heading>
                Assessment
                <i ng-if="patient.referral.emergencyVsElective=='Emergency'"
                   ng-class="(patientForm.emergencyAssessmentForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red'
                   : 'glyphicon glyphicon-ok-sign green'">

                </i>
                <i ng-if="patient.referral.emergencyVsElective=='Elective'"
                   ng-class="(patientForm.electiveAssessmentForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red'
                   : 'glyphicon glyphicon-ok-sign green'">

                </i>
            </uib-tab-heading>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Emergency'" src="'referral/emergency/assessment.form.html'"></ng-include>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Elective'" src="'referral/elective/assessment.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="4" heading="Vitals and Results" ng-if="patient.referral.emergencyVsElective=='Emergency'" ><!-- score -->
            <uib-tab-heading>
                Vitals and Results
                <i ng-class="(patientForm.emergencyScoreForm.$invalid) ? 'glyphicon glyphicon-exclamation-sign red' : 'glyphicon glyphicon-ok-sign green'"></i>
            </uib-tab-heading>
            <ng-include src="'referral/emergency/score.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="5" heading="Decision">
            <uib-tab-heading>
                Decision
                <i ng-if="patient.referral.emergencyVsElective=='Emergency'"
                   ng-class="(patientForm.emergencyDecisionForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red'
                   : 'glyphicon glyphicon-ok-sign green'">

                </i>
                <i ng-if="patient.referral.emergencyVsElective=='Elective'"
                   ng-class="(patientForm.electiveDecisionForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red'
                   : 'glyphicon glyphicon-ok-sign green'">

                </i>
            </uib-tab-heading>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Emergency'" src="'referral/emergency/decision.form.html'"></ng-include>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Elective'" src="'referral/elective/decision.form.html'"></ng-include>
        </uib-tab>
        <uib-tab index="6" heading="Outcome">
            <uib-tab-heading>
                Outcome
                <i ng-if="patient.referral.emergencyVsElective=='Emergency'"
                   ng-class="(patientForm.emergencyOutcomeForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red'
                   : 'glyphicon glyphicon-ok-sign green'"></i>
                <i ng-if="patient.referral.emergencyVsElective=='Elective'"
                   ng-class="(patientForm.electiveOutcomeForm.$invalid)
                   ? 'glyphicon glyphicon-exclamation-sign red' :
                   'glyphicon glyphicon-ok-sign green'">

                </i>
            </uib-tab-heading>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Emergency'" src="'referral/emergency/outcome.form.html'"></ng-include>
            <ng-include ng-if="patient.referral.emergencyVsElective=='Elective'" src="'referral/elective/outcome.form.html'"></ng-include>
        </uib-tab>
    </uib-tabset>

    <button id="formSubmitButton" type="submit" ng-disabled="patientForm.$invalid" class="btn btn-primary">Save</button>

</form></script>
<script type="text/ng-template" id="referral/referral.patient.details.form.html">
<ng-form name="referralPatientDetailsForm">
    <div class="panel form-panel">
        <h1 class="form-print-heading">Patient Details</h1>
        <div class="row">
            <div class="col-sm-6">
                <ccdb-form-text label="Last name" value="patient.lastName"></ccdb-form-text>
                <ccdb-form-text label="First name" value="patient.firstName"></ccdb-form-text>
                <ccdb-form-select label="Race" options="races" value="patient.race"></ccdb-form-select>
                <ccdb-form-select label="Gender" options="genders" value="patient.gender"></ccdb-form-select>
                <ccdb-form-date label="Birth date" ng-model="patient.birthDate" ></ccdb-form-date>
            </div>
            <div class="col-sm-6">
                <ccdb-form-text label="ICU registrar/Doctor" value="patient.referral.icuRegistrar"></ccdb-form-text>
                <ccdb-form-text label="ICU consultant" value="patient.referral.icuConsultant"></ccdb-form-text>
                <ccdb-form-date-and-time label="Time patient seen by ICU" ng-model="patient.referral.timePatientSeenByICU"></ccdb-form-date-and-time>
            </div>
        </div>
    </div>
</ng-form>

</script>
<script type="text/ng-template" id="reports/reports.html">
<div class="row">
    <div class="col-md-6">
        <h3>Weekly Reports</h3>
    </div>
    <div class="col-md-6">
    <span class="pull-right">
      <ccdb-date-range></ccdb-date-range>
    </span>
    </div>
</div>
<div class="divider"></div>
<div class="panel box">
    <ccdb-patient-count title="Number of Referrals"
                        range-field="referral.referralDateTime"
                        filter='{"referral.decision": "Cannot make decision now"}'
    ></ccdb-patient-count>
</div>
<div class="panel box">
    <ccdb-patient-count title="Admitted patients"
                        range-field="admission.firstAdmittedDateTime"
                        filter='{"referral.decision": "Accepted", "discharge.dischargeDateTime": null}'
    ></ccdb-patient-count>
</div>
</script>
<script type="text/ng-template" id="reset/reset.html">
<div class="container">
  <div class="form-reset">
      <h2 class="form-reset-heading">Reset your password</h2>
      <label for="username" class="sr-only">username</label>
      <input type="username" class="form-control" id="username" placeholder="Username (email address)" ng-model="user.username">
      <div ng-show="message" class="form-reset-message">{{message}}</div>
      <button type="button" ng-hide="message" ng-click="reset()" class="btn btn-lg btn-primary btn-block">Reset</button>
  </div>
</div></script>
<script type="text/ng-template" id="score/score.form.html">
<div class="panel form-panel">
    <h1 class="form-print-heading">Vitals and Results</h1>
    <div class="row">
        <div class="col-sm-6">
            <div class="form-group form-print-hide"><span class="pull-right">Not all values are available <input type="checkbox" ng-model="score.allValuesNotAvailable"></span></div>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Temperature" placeholder="&deg;C" value="score.temperature"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Systolic blood pressure" placeholder="mm Hg" value="score.systolicPressure"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Diastolic blood pressure" placeholder="mm Hg" value="score.diastolicPressure"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Heart rate" placeholder="beats/minute" value="score.heartRate"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Saturation" value="score.saturation" ng-if="!referral && !apache"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Respiratory heart rate" placeholder="breaths/minute" value="score.respiratoryRate" ng-if="!referral"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Urine output volume" placeholder="mls" value="score.urineOutput" ng-if="!admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Urine output hours" placeholder="hrs" value="score.urineOutputHours" ng-if="!admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Glucose" placeholder="mmol/L" value="score.glucose" ng-if="!referral && !admission"></ccdb-form-number>
            <ccdb-form-select required="!score.allValuesNotAvailable" label="Eye opening" options="$parent.eyeOpening" value="score.eyeOpening"></ccdb-form-select>
            <ccdb-form-select required="!score.allValuesNotAvailable" label="Verbal response" options="$parent.verbalResponse" value="score.verbalResponse"></ccdb-form-select>
            <ccdb-form-select required="!score.allValuesNotAvailable" label="Motor response" options="$parent.motorResponse" value="score.motorResponse"></ccdb-form-select>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Glasgow coma scale" value="score.glasgowComaScale"></ccdb-form-number>
            <ccdb-form-select required="!score.allValuesNotAvailable" label="Sedated" options="$parent.$parent.yesNo" value="score.sedated" ng-if="!referral && !apache"></ccdb-form-select>
            <ccdb-form-select required="!score.allValuesNotAvailable" label="Airway" options="$parent.$parent.airway" value="score.airway" ng-if="!referral && !apache"></ccdb-form-select>
            <ccdb-form-select required="!score.allValuesNotAvailable" label="Pupils" options="$parent.$parent.pupils" value="score.pupils" ng-if="!referral"></ccdb-form-select>
            <ccdb-form-select required="!score.allValuesNotAvailable" label="Ventilated" options="$parent.$parent.yesNo" value="score.ventilated" ng-if="!referral"></ccdb-form-select>
            <ccdb-form-select required="!score.allValuesNotAvailable" label="Thrombolytic therapy" options="$parent.$parent.yesNo" value="score.thrombolyticTherapy" ng-if="!referral"></ccdb-form-select>
        </div>
        <div class="col-sm-6">
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Haematocrit" placeholder="%" value="score.haematocrit" ng-if="!admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="WBC" placeholder="x103/mm3" value="score.wBC" ng-if="!admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Sodium" placeholder="mEq/L" value="score.sodium" ng-if="!admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Potassium" placeholder="mEq/L" value="score.potassium" ng-if="!referral"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Corr Calcium" placeholder="mmol/l" value="score.corrCalcium" ng-if="!referral"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Urea" placeholder="mmol/l" value="score.urea" ng-if="!admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Creatinine" placeholder="mg/dL" value="score.creatinine" ng-if="!admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Albumin" placeholder="g/l" value="score.albumin" ng-if="!admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Bilirubin" placeholder="umol/l" value="score.bilirubin" ng-if="!admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Glucose" placeholder="mmol/L" value="score.glucose"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="INR" value="score.iNR" ng-if="!referral && !admission"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="FiO2" placeholder="%" value="score.fiO2"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="PH" value="score.pH"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="pO2" placeholder="kPa OR mmHg" value="score.pO2"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="PCO2" placeholder="kPa" value="score.pCO2"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Lactate" value="score.lactate"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="HCO3" placeholder="mEq/L" value="score.hCO3" ng-if="!referral"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Base excess" value="score.baseExcess" ng-if="!referral"></ccdb-form-number>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Bicarbonate" value="score.bicarbonate" ng-if="!referral && !apache"></ccdb-form-number>
            <ccdb-form-text   required="!score.allValuesNotAvailable" label="Current antibiotic therapy in ward" value="score.currentAntibioticTherapyInWard" ng-if="!referral && !apache"></ccdb-form-text>
            <ccdb-form-number required="!score.allValuesNotAvailable" label="Duration of antibiotics" placeholder="days" value="score.durationOfAntibiotics" ng-if="!referral && !apache"></ccdb-form-number>
        </div>
    </div>
</div></script>
<script type="text/ng-template" id="search/search.html">
<h1>Find patient</h1>
<div class="divider"></div>
<div class="panel panel-default">
  <input autofocus type="text" ng-model="query" class="form-control" placeholder="Search by patient detail..."/>
  <ccdb-patient-list title="" buttons="Referral,Admission,Score,Discharge" query="query"></ccdb-patient-list>
</div>
</script>
<script type="text/ng-template" id="user/user.form.html">
<h1>Edit user: {{user.name}}</h1>
<div class="panel panel-default">
  <form>
      <ccdb-form-text no-suggestions="true" label="Username" value="user.username"></ccdb-form-text>
      <ccdb-form-text no-suggestions="true" label="Name" value="user.name"></ccdb-form-text>
      <ccdb-form-select label="Hospital" options="hospitals" value="user.hospital"></ccdb-form-select>
      <ccdb-form-select label="Role" options="roles" value="user.role"></ccdb-form-select>
      <a ng-click="save(user)" class="btn btn-default">Save</a>
  </form>
</div>
</script>
<script type="text/ng-template" id="user/user.list.html">
<div class="row">
  <div class="col-md-6">
    <h1>Users</h1>
  </div>
  <div class="col-md-6">
    <span class="pull-right">
      <a href="#/editUser/new" class="btn btn-default">New User</a>
    </span>
  </div>
</div>
<div class="panel">
  <table class="table table-hover">
      <thead>
      <tr>
          <th>Name</th>
          <th>Hospital</th>
          <th>Role</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="user in users">
          <td>{{user.name}}</td>
          <td>{{user.hospital}}</td>
          <td>{{user.role}}</td>
          <td><a href="#/editUser/{{user._id}}" class="button radius">Edit</a></td>
      </tr>
      </tbody>
  </table>
</div>
</script>
<script type="text/ng-template" id="utils/date.range.html">
{{dateRangeService.dateRange.startDate | date : 'MMM d'}} - {{dateRangeService.dateRange.endDate | date : 'MMM d, y'}}<span class="noselect left-space"><a ng-click="dateRangeService.previous()" class="btn btn-default noselect">&lt;</a> <a ng-click="dateRangeService.next()" class="btn btn-default noselect">&gt;</a> </span>
</script>
<script type="text/ng-template" id="utils/form/apache.number.html">
<div class="form-group">
    <label for="right-label" class="form-adjacent-group-label">{{ label }}</label>
    <div class="form-adjacent-group">
    <input type="number"
           class="form-control form-adjacent-group-align-left"
           id="left-label"
           placeholder="{{ placeholder }}"
           ng-model="$parent.patient.apacheLow[field]"
           ng-required="required"
           autocomplete="off"
    >
    <input type="number"
           class="form-control form-adjacent-group-align-right"
           id="right-label"
           placeholder="{{ placeholder }}"
           ng-model="$parent.patient.apacheHigh[field]"
           ng-required="required"
           autocomplete="off"
    >
    </div>
</div></script>
<script type="text/ng-template" id="utils/form/apache.select.html">
<div class="form-group">
    <label for="right-label" class="form-adjacent-group-label">{{ label }}</label>
    <div class="form-adjacent-group">
        <select
                id="left-label"
                class="form-control form-adjacent-group-align-left" ng-model="$parent.patient.apacheLow[field]"
                ng-required="required==true || (required==undefined && !optional)"
        >
        <option ng-repeat="option in options">{{ option }}</option>
        </select>
        <select
                id="right-label"
                class="form-control form-adjacent-group-align-right"
                ng-model="$parent.patient.apacheHigh[field]"
                ng-required="required==true || (required==undefined && !optional)"
        >
        <option ng-repeat="option in options">{{ option }}</option>
        </select>
    </div>
</div>
</script>
<script type="text/ng-template" id="utils/form/date.html">
<div class="form-group">
    <label for="right-label">{{ label }}</label>
    <div id="right-label" class="form-date" >
        <select class="form-date-day" ng-model="date" ng-change="modelChanged()" ng-options="d as d for d in dates" required ></select>
        <select class="form-date-month" ng-model="month" ng-change="modelChanged()" ng-options="m.key as m.value for m in months" required ></select>
        <select  class="form-date-year" ng-model="year" ng-change="modelChanged()" ng-options="y as y for y in years" required ></select>

        <a class="btn btn-default btn-xs noselect" ng-click="modelChanged(true)">now</a>
    </div>
</div>
</script>
<script type="text/ng-template" id="utils/form/dateAndTime.html">
<div class="form-group">
    <label for="right-label">{{ label }}</label>
    <div id="right-label" class="form-dateAndTime">
        <div class="form-dateAndTime-time">
            <p class="form-dateAndTime-label">Time</p>
            <select class="form-dateAndTime-hour" ng-model="hour" ng-change="modelChanged()" ng-options="h as h for h in hours" required></select>
            <p class="form-dateAndTime-colon"> :</p>
            <select class="form-dateAndTime-minute"ng-model="minute" ng-change="modelChanged()" ng-options="m as m for m in minutes" required></select>
        </div>
        <p class="form-dateAndTime-label">Date</p>
        <select class="form-dateAndTime-day" ng-model="date" ng-change="modelChanged()" ng-options="d as d for d in dates" required></select>
        <select class="form-dateAndTime-month" ng-model="month" ng-change="modelChanged()" ng-options="m.key as m.value for m in months" required></select>
        <select class="form-dateAndTime-year" ng-model="year" ng-change="modelChanged()" ng-options="y as y for y in years" required></select>
        <a class="btn btn-default btn-xs noselect" ng-click="modelChanged(true)">now</a>
    </div>
</div></script>
<script type="text/ng-template" id="utils/form/multiselect.html">
<div class="form-group">
    <label class="form-multiselect-label">{{ label }}</label>
    <div class="form-multiselect-options">
        <div class="checkbox" ng-repeat="option in options">
            <label><input type="checkbox" checklist-model="value" checklist-value="option"/>{{option}}</label>
        </div>
    </div>
</div>
</script>
<script type="text/ng-template" id="utils/form/number.html">
<div class="form-group">
    <label for="right-label">{{ label }}</label>
    <input type="number"
           class="form-control"
           id="right-label"
           placeholder="{{ placeholder }}"
           ng-model="value"
           ng-required="required"
           autocomplete="off"
    >
</div>
</script>
<script type="text/ng-template" id="utils/form/select.html">
<div class="form-group">
    <label for="right-label">{{ label }}</label>
    <select id="right-label" class="form-control" ng-model="value" ng-required="required==true || (required==undefined && !optional)">
    <option ng-repeat="option in options">{{ option }}</option>
    </select>
</div>
</script>
<script type="text/ng-template" id="utils/form/text.html">
<div class="form-group">
    <label for="right-label">{{ label }}</label>
    <input type="text"
           class="form-control"
           id="right-label"
           placeholder="{{ placeholder }}"
           ng-model="value"
           uib-typeahead="item for item in getSuggestions($viewValue)"
           ng-required="required"
           autocomplete="off"
    >
</div>
</script>
<script type="text/ng-template" id="utils/form/textarea.html">
<div class="form-group">
    <label for="right-label">{{ label }}</label>
    <textarea class="form-control" rows="5" cols="30" id="right-label" ng-model="value" required></textarea>
</div>
</script>
